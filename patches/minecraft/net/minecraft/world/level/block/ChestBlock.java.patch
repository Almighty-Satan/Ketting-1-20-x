--- a/net/minecraft/world/level/block/ChestBlock.java
+++ b/net/minecraft/world/level/block/ChestBlock.java
@@ -125,6 +_,37 @@
          return chesttype == ChestType.RIGHT ? DoubleBlockCombiner.BlockType.FIRST : DoubleBlockCombiner.BlockType.SECOND;
       }
    }
+   // CraftBukkit start
+   public static class DoubleInventory implements MenuProvider {
+
+      private final ChestBlockEntity tileentitychest;
+       private final ChestBlockEntity tileentitychest1;
+       public final CompoundContainer inventorylargechest;
+
+       public DoubleInventory(ChestBlockEntity tileentitychest, ChestBlockEntity tileentitychest1, CompoundContainer inventorylargechest) {
+           this.tileentitychest = tileentitychest;
+           this.tileentitychest1 = tileentitychest1;
+           this.inventorylargechest = inventorylargechest;
+       }
+
+       @Nullable
+       @Override
+       public AbstractContainerMenu createMenu(int i, Inventory playerinventory, Player entityhuman) {
+           if (tileentitychest.canOpen(entityhuman) && tileentitychest1.canOpen(entityhuman)) {
+               tileentitychest.unpackLootTable(playerinventory.player);
+               tileentitychest1.unpackLootTable(playerinventory.player);
+               return ChestMenu.sixRows(i, playerinventory, inventorylargechest);
+           } else {
+               return null;
+           }
+       }
+
+       @Override
+       public Component getDisplayName() {
+           return (Component) (tileentitychest.hasCustomName() ? tileentitychest.getDisplayName() : (tileentitychest1.hasCustomName() ? tileentitychest1.getDisplayName() : Component.translatable("container.chestDouble")));
+       }
+   };
+   // CraftBukkit end
 
    public RenderShape getRenderShape(BlockState p_51567_) {
       return RenderShape.ENTITYBLOCK_ANIMATED;
@@ -335,7 +_,8 @@
    }
 
    public BlockState mirror(BlockState p_51549_, Mirror p_51550_) {
-      return p_51549_.rotate(p_51550_.getRotation(p_51549_.getValue(FACING)));
+      BlockState rotated = p_51549_.rotate(p_51550_.getRotation(p_51549_.getValue(FACING)));
+      return p_51550_ == Mirror.NONE ? rotated : rotated.setValue(TYPE, rotated.getValue(TYPE).getOpposite());  // Forge: Fixed MC-134110 Structure mirroring breaking apart double chests
    }
 
    protected void createBlockStateDefinition(StateDefinition.Builder<Block, BlockState> p_51562_) {
